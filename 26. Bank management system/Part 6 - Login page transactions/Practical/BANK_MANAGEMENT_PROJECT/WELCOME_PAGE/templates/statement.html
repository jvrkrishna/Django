{% extends "base.html" %}
{% block content %}
<h2>Statement</h2>
<p>Current balance: â‚¹{{ balance }}</p>

<form method="get" action="{% url 'statement' %}">
  {{ form.choice }}
  Month: {{ form.month }} 
  Year: {{ form.year }}
  From: {{ form.date_from }} 
  To: {{ form.date_to }}
  <button type="submit">Filter</button>
  <button type="submit" name="download" value="1">Download CSV</button>
</form>

<table border="1">
  <thead>
    <tr>
      <th>Date</th>
      <th>Type</th>
      <th>Amount</th>
      <th>Balance After</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    {% for tx in transactions %}
      <tr>
        <td>{{ tx.created_at }}</td>
        <td>{{ tx.get_tx_type_display }}</td>
        <td>{{ tx.amount }}</td>
        <td>{{ tx.balance_after }}</td>
        <td>{{ tx.description }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No transactions found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
